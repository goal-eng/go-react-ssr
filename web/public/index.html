<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{index . "title"}}</title>
    {{range $k, $v := index . "metaTags"}}
    <meta name="{{$k}}" content="{{$v}}" />
    {{end}} {{range $k, $v := index . "ogMetaTags"}}
    <meta property="{{$k}}" content="{{$v}}" />
    {{end}}
    <link rel="icon" type="image/svg+xml" href="/react.svg" />
  </head>
  <body>
    <div id="root"></div>
    <script type="module">
      {{index . "src"}}
    </script>
    <script>
      let socket = new WebSocket("ws://127.0.0.1:8080/ws/hotreload");
      console.log("Attempting Connection...");

      socket.onopen = () => {
        console.log("Successfully Connected");
        socket.send("Hi From the Client!");
      };

      socket.onmessage = (event) => {
        if (event.data === "reload") {
          console.log("Reloading...");
          window.location.reload();
        }
      };

      socket.onclose = (event) => {
        console.log("Socket Closed Connection: ", event);
        socket.send("Client Closed!");
      };

      socket.onerror = (error) => {
        console.log("Socket Error: ", error);
      };
    </script>
  </body>
</html>
